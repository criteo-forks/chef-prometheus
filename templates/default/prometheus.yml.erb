# Global default settings.
global:
  scrape_interval:     "15s"
  evaluation_interval: "15s"

rule_files:
- "rules/*.rules"

scrape_configs:
<% for job in @jobs||[] %>
- job_name: "<%= job.name %>"
  <% if job.scrape_interval %>
  scrape_interval: "<%= job.scrape_interval %>"
  <% end %>
  <% if job.scrape_timeout %>
  scrape_timeout: "<%= job.scrape_timeout %>"
  <% end %>
  metrics_path: "<%= job.metrics_path %>"
  target_groups:
    - targets: <%= [job.target].flatten().map{ |t| t.gsub(Regexp.new('http://(.*)/metrics'), '\1') } %>
<% end %>
